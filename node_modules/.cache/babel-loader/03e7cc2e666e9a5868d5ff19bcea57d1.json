{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\IntMag\\\\intMAgClient\\\\src\\\\App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport StartPage from \"./pages/StartPage/Start-page\";\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport Layout from \"./Routes/Layout\";\nimport ComputerStore from \"./pages/mainPage/storePage\";\nimport BasketPage from \"./pages/basketPage/basketPage\";\nimport ItemPage from \"./pages/itemPage/itemPage\";\nimport RegistrationPage from \"./pages/RigistrationPage/RegistrationPage\";\nimport LoginPage from \"./pages/loginPage/loginPage\";\nimport { useAppDispatch, useAppSelector } from \"./components/redux/hooks/hooks\";\nimport { useCheckAuthQuery } from \"./components/redux/api/server.api\";\nimport { setAuth } from \"./components/redux/slices/authSlice\";\nimport { setUser } from \"./components/redux/slices/userSlice\";\nimport jwtDecode from \"jwt-decode\";\nimport Loader from \"./components/UI/Loader/Loader\";\nimport AdminPage from \"./pages/adminPage/adminPage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const Auth = useAppSelector(state => state.auth.auth);\n  const dispatch = useAppDispatch();\n  const {\n    data,\n    error\n  } = useCheckAuthQuery('');\n  const [Loading, setLoading] = React.useState(true);\n  useEffect(() => {\n    setLoading(true);\n\n    if (error) {\n      dispatch(setAuth(false));\n      dispatch(setUser([]));\n      setLoading(false);\n    }\n\n    if (data) {\n      localStorage.setItem('token', data.token);\n      dispatch(setAuth(true));\n      dispatch(setUser(jwtDecode(data.token)));\n      setLoading(false);\n    }\n  }, [data, error]);\n\n  if (Loading) {\n    return /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 30\n        }, this),\n        children: [Auth && /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/BucketPage\",\n          element: /*#__PURE__*/_jsxDEV(BasketPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 14\n        }, this), !Auth && /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Login\",\n          element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 45\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 15\n        }, this), !Auth && /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Registration\",\n          element: /*#__PURE__*/_jsxDEV(RegistrationPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 52\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: !Auth ? \"/Login\" : '/StartPage'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/admin\",\n          element: /*#__PURE__*/_jsxDEV(AdminPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/StartPage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Store\",\n          element: /*#__PURE__*/_jsxDEV(ComputerStore, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/StartPage\",\n          element: /*#__PURE__*/_jsxDEV(StartPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/ItemPage/:id\",\n          element: /*#__PURE__*/_jsxDEV(ItemPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"cwpaM+Xt1dzBfYIxutW7U9AOiwc=\", false, function () {\n  return [useAppSelector, useAppDispatch, useCheckAuthQuery];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","StartPage","Routes","Route","Navigate","Layout","ComputerStore","BasketPage","ItemPage","RegistrationPage","LoginPage","useAppDispatch","useAppSelector","useCheckAuthQuery","setAuth","setUser","jwtDecode","Loader","AdminPage","App","Auth","state","auth","dispatch","data","error","Loading","setLoading","useState","localStorage","setItem","token"],"sources":["E:/Projects/IntMag/intMAgClient/src/App.tsx"],"sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport Header from \"./components/header/header\";\r\nimport StartPage from \"./pages/StartPage/Start-page\";\r\nimport {Routes, Route ,Navigate} from 'react-router-dom'\r\nimport Layout from \"./Routes/Layout\";\r\nimport ComputerStore  from \"./pages/mainPage/storePage\";\r\nimport BasketPage from \"./pages/basketPage/basketPage\";\r\nimport ItemPage from \"./pages/itemPage/itemPage\";\r\nimport RegistrationPage from \"./pages/RigistrationPage/RegistrationPage\";\r\nimport LoginPage from \"./pages/loginPage/loginPage\";\r\nimport { useAppDispatch, useAppSelector } from \"./components/redux/hooks/hooks\";\r\nimport { useCheckAuthQuery } from \"./components/redux/api/server.api\";\r\nimport { setAuth } from \"./components/redux/slices/authSlice\";\r\nimport { setUser } from \"./components/redux/slices/userSlice\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport Loader from \"./components/UI/Loader/Loader\";\r\nimport AdminPage from \"./pages/adminPage/adminPage\";\r\n\r\nfunction App() {\r\n  const Auth = useAppSelector(state=>state.auth.auth)\r\n  const dispatch = useAppDispatch()\r\n  const {data,error} = useCheckAuthQuery('')\r\n  const [Loading,setLoading] = React.useState<boolean>(true)\r\n  useEffect(()=>{\r\n  setLoading(true)\r\n\r\n  \r\n   if(error){\r\n    dispatch(setAuth(false))\r\n    dispatch(setUser([]))\r\n    setLoading(false)\r\n   }\r\n   if(data){\r\n    localStorage.setItem('token',data.token)\r\n    dispatch(setAuth(true))\r\n    dispatch(setUser(jwtDecode(data.token)))\r\n    setLoading(false)\r\n   }\r\n  },[data,error])\r\n  if(Loading){\r\n    return <Loader/>\r\n  }\r\n\r\n  \r\n  return (\r\n  \r\n    <div className=\"App\">\r\n\r\n    <Routes>\r\n    <Route path='/' element={<Layout/>}>\r\n    {Auth && <Route path='/BucketPage' element={<BasketPage />}/> } \r\n    {!Auth && <Route path='/Login' element={<LoginPage/>}/>}\r\n    {!Auth && <Route path='/Registration' element={<RegistrationPage/>}/>}\r\n    <Route path=\"/*\" element={<Navigate to={!Auth ? \"/Login\" : '/StartPage'} />} />\r\n    <Route path='/admin' element={<AdminPage/>}/>\r\n    <Route path=\"/\" element={<Navigate to=\"/StartPage\" />} />\r\n    <Route path ='/Store' element={<ComputerStore/>}/>\r\n    <Route path='/StartPage' element={<StartPage />}/>\r\n    <Route path='/ItemPage/:id' element={<ItemPage />}/>\r\n    \r\n    \r\n    </Route>\r\n    \r\n    \r\n    </Routes>\r\n\r\n    </div>\r\n  \r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}