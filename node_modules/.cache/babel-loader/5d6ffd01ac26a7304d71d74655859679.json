{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nexport const serverApi = createApi({\n  reducerPath: 'serverApi',\n  tagTypes: ['DevicesBusket', 'Devices'],\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:5000/api/',\n    prepareHeaders: (headers, _ref) => {\n      let {\n        getState\n      } = _ref;\n      const token = localStorage.getItem('token');\n      headers.set('authorization', token ? `Bearer ${token}` : '');\n      return headers;\n    }\n  }),\n  endpoints: build => ({\n    checkAuth: build.query({\n      query: () => ({\n        url: `user/auth`\n      })\n    }),\n    getBrandsByType: build.query({\n      query: id => ({\n        url: `typebrand/${id}`\n      })\n    }),\n    userRegister: build.mutation({\n      query: body => ({\n        url: \"user/registration\",\n        method: 'POST',\n        body\n      })\n    }),\n    userLogin: build.mutation({\n      query: body => ({\n        url: 'user/login',\n        method: 'POST',\n        body\n      })\n    }),\n    AddType: build.mutation({\n      query: body => ({\n        url: 'type',\n        method: 'POST',\n        body\n      })\n    }),\n    AddBrand: build.mutation({\n      query: body => ({\n        url: 'brand',\n        method: 'POST',\n        body\n      })\n    }),\n    getTypes: build.query({\n      query: () => ({\n        url: 'type'\n      })\n    }),\n    getOneDevice: build.query({\n      query: id => ({\n        url: `device/${id}`\n      })\n    }),\n    getBasket: build.query({\n      query: id => ({\n        url: `basket/${id}`\n      }),\n      providesTags: (result, error, arg) => result ? [{\n        type: 'DevicesBusket',\n        id: 'LIST'\n      }, ...result.map(_ref2 => {\n        let {\n          id\n        } = _ref2;\n        return {\n          type: 'DevicesBusket',\n          id\n        };\n      }), 'DevicesBusket'] : [{\n        type: 'DevicesBusket',\n        id: 'LIST'\n      }]\n    }),\n    getDevices: build.query({\n      query: _ref3 => {\n        let {\n          type,\n          brand\n        } = _ref3;\n        return {\n          url: 'device',\n          params: {\n            typeId: type,\n            brandId: brand\n          }\n        };\n      },\n      providesTags: (result, error, arg) => result ? [{\n        type: 'Devices',\n        id: 'LIST'\n      }, ...result.map(_ref4 => {\n        let {\n          id\n        } = _ref4;\n        return {\n          type: 'Devices',\n          id\n        };\n      }), 'Devices'] : [{\n        type: 'Devices',\n        id: 'LIST'\n      }]\n    }),\n    addDevice: build.mutation({\n      query: body => ({\n        url: \"device\",\n        method: 'POST',\n        body\n      })\n    }),\n    addBucketDevice: build.mutation({\n      query: body => ({\n        url: \"basket\",\n        method: 'POST',\n        body\n      }),\n      invalidatesTags: [{\n        type: 'DevicesBusket'\n      }]\n    }),\n    deleteDevice: build.mutation({\n      query: id => ({\n        url: `device/${id}`,\n        method: 'DELETE'\n      }),\n      invalidatesTags: [{\n        type: 'Devices',\n        id: 'LIST'\n      }]\n    })\n  })\n});\nexport const {\n  useUserRegisterMutation,\n  useUserLoginMutation,\n  useCheckAuthQuery,\n  useGetTypesQuery,\n  useGetDevicesQuery,\n  useAddBucketDeviceMutation,\n  useGetBasketQuery,\n  useGetOneDeviceQuery,\n  useGetBrandsByTypeQuery,\n  useAddDeviceMutation,\n  useAddTypeMutation,\n  useAddBrandMutation,\n  useDeleteDeviceMutation\n} = serverApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","serverApi","reducerPath","tagTypes","baseQuery","baseUrl","prepareHeaders","headers","getState","token","localStorage","getItem","set","endpoints","build","checkAuth","query","url","getBrandsByType","id","userRegister","mutation","body","method","userLogin","AddType","AddBrand","getTypes","getOneDevice","getBasket","providesTags","result","error","arg","type","map","getDevices","brand","params","typeId","brandId","addDevice","addBucketDevice","invalidatesTags","deleteDevice","useUserRegisterMutation","useUserLoginMutation","useCheckAuthQuery","useGetTypesQuery","useGetDevicesQuery","useAddBucketDeviceMutation","useGetBasketQuery","useGetOneDeviceQuery","useGetBrandsByTypeQuery","useAddDeviceMutation","useAddTypeMutation","useAddBrandMutation","useDeleteDeviceMutation"],"sources":["E:/Projects/IntMag/intMAgClient/src/components/redux/api/server.api.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\r\nimport { userRegister } from '../../interfaces/IRequest';\r\n\r\nimport {IBrandsByType, IToken, IType, DeviceResponce, IBasketDevice, IDevice} from '../../interfaces/IResponse'\r\n\r\n\r\nexport const serverApi = createApi({\r\n    reducerPath: 'serverApi',\r\n    tagTypes:['DevicesBusket','Devices'],\r\n    baseQuery: fetchBaseQuery({ \r\n        baseUrl: 'http://localhost:5000/api/',\r\n        prepareHeaders:(headers,{getState}):any=>{\r\n            const token = localStorage.getItem('token'); \r\n            headers.set('authorization',token ? `Bearer ${token}` : '')\r\n            return headers\r\n        } \r\n    }),\r\n\r\n    endpoints: (build) => ({\r\n      checkAuth:build.query<IToken,string>({\r\n\r\n        query: () => ({\r\n          url:`user/auth`,\r\n          \r\n       }),\r\n      }),\r\n\r\n      getBrandsByType:build.query<IBrandsByType[],number>({\r\n        query: (id) => ({\r\n          url:`typebrand/${id}`,\r\n       })\r\n      }),\r\n\r\n      userRegister: build.mutation<any,any>({\r\n        query: (body) => ({\r\n            url:\"user/registration\",\r\n            method:'POST',\r\n            body,\r\n        })\r\n      }),\r\n\r\n      userLogin:build.mutation<any,any>({\r\n        query:(body)=>({\r\n            url:'user/login',\r\n            method:'POST',\r\n            body\r\n        })\r\n      }),\r\n      \r\n      AddType:build.mutation<any,any>({\r\n        query:(body)=>({\r\n            url:'type',\r\n            method:'POST',\r\n            body\r\n        })\r\n      }),\r\n      \r\n      AddBrand:build.mutation<any,any>({\r\n        query:(body)=>({\r\n            url:'brand',\r\n            method:'POST',\r\n            body\r\n        })\r\n      }),\r\n\r\n      getTypes:build.query<IType[],string>({\r\n        query:()=>({\r\n            url:'type',\r\n        })\r\n      }),\r\n\r\n      getOneDevice:build.query<IDevice,any>({\r\n        query:(id)=>({\r\n            url:`device/${id}`,\r\n        })\r\n      }),\r\n\r\n      getBasket:build.query<IBasketDevice[],number>({\r\n        query:(id)=>({\r\n            url:`basket/${id}`,\r\n        }),\r\n        providesTags: (result:any, error, arg) =>\r\n        result\r\n          ? [{type:'DevicesBusket',id:'LIST'},\r\n            ...result.map(({ id }:any) => ({ type: 'DevicesBusket' as const, id })), 'DevicesBusket'\r\n          ]\r\n          : [{type:'DevicesBusket',id:'LIST'}],\r\n      }),\r\n\r\n      getDevices:build.query<DeviceResponce,any>({\r\n        query:({type,brand})=>({\r\n            url:'device',\r\n            params:{\r\n              typeId:type,\r\n              brandId:brand,\r\n            },\r\n        }),\r\n        providesTags: (result:any, error, arg) =>\r\n        result\r\n          ? [{type:'Devices',id:'LIST'},\r\n            ...result.map(({ id }:any) => ({ type: 'Devices' as const, id })), 'Devices'\r\n          ]\r\n          : [{type:'Devices',id:'LIST'}],\r\n      }),\r\n      \r\n\r\n      addDevice: build.mutation<any, any>({\r\n        query: (body) => ({\r\n            url:\"device\",\r\n            method:'POST',\r\n            body,\r\n        }),\r\n        }),\r\n      \r\n\r\n      addBucketDevice: build.mutation<void, any>({\r\n        query: (body) => ({\r\n            url:\"basket\",\r\n            method:'POST',\r\n            body,\r\n        }),\r\n\r\n        invalidatesTags:[{type:'DevicesBusket'}]\r\n      }),\r\n      \r\n      deleteDevice: build.mutation<void, any>({\r\n        query: (id) => ({\r\n            url:`device/${id}`,\r\n            method:'DELETE'\r\n        }),\r\n\r\n        invalidatesTags:[{type:'Devices',id:'LIST'}]\r\n      }),\r\n    })\r\n  })\r\n\r\n  export const {\r\n    useUserRegisterMutation,\r\n    useUserLoginMutation,\r\n    useCheckAuthQuery,\r\n    useGetTypesQuery,\r\n    useGetDevicesQuery,\r\n    useAddBucketDeviceMutation,\r\n    useGetBasketQuery,\r\n    useGetOneDeviceQuery,\r\n    useGetBrandsByTypeQuery,\r\n    useAddDeviceMutation,\r\n    useAddTypeMutation,\r\n    useAddBrandMutation,\r\n    useDeleteDeviceMutation\r\n  } = serverApi\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}