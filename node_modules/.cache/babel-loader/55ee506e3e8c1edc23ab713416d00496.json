{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\Online-Store-Server-Client\\\\Frontend\\\\src\\\\pages\\\\loginPage\\\\loginPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useUserLoginMutation } from '../../components/redux/api/server.api';\nimport jwt_decode from 'jwt-decode';\nimport './loginPage.scss';\nimport { useNavigate } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from '../../components/redux/hooks/hooks';\nimport { setUser } from '../../components/redux/slices/userSlice';\nimport { setAuth } from '../../components/redux/slices/authSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RegistrationPage() {\n  _s();\n\n  const [email, setEmail] = React.useState();\n  const [password, setPassword] = React.useState();\n  const [loginUser, {\n    error: loginError\n  }] = useUserLoginMutation();\n  const [error, setError] = React.useState('');\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(state => state.user.userToken);\n  const navigate = useNavigate();\n\n  const handleLogin = async e => {\n    e.preventDefault();\n    await loginUser({\n      email: email,\n      password: password\n    }).unwrap().then(data => data.token).then(token => {\n      localStorage.setItem('token', token);\n      dispatch(setUser(jwt_decode(token)));\n      dispatch(setAuth(true));\n      navigate(-1);\n    }).catch(e => setError(e.data.message));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login_main\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"Login_main-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"Login_main_title\",\n        children: \"\\u0412\\u0445\\u043E\\u0434\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: email,\n        className: \"Login_form_email\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: password,\n        className: \"Login_form_password\",\n        type: \"password\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        className: \"Login_form_submit\",\n        onClick: handleLogin,\n        value: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"Login_form_error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RegistrationPage, \"FnVKW5xubsVEsOL0x/5vQpNDRr4=\", false, function () {\n  return [useUserLoginMutation, useAppDispatch, useAppSelector, useNavigate];\n});\n\n_c = RegistrationPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegistrationPage\");","map":{"version":3,"names":["React","useUserLoginMutation","jwt_decode","useNavigate","useAppDispatch","useAppSelector","setUser","setAuth","RegistrationPage","email","setEmail","useState","password","setPassword","loginUser","error","loginError","setError","dispatch","user","state","userToken","navigate","handleLogin","e","preventDefault","unwrap","then","data","token","localStorage","setItem","catch","message","target","value"],"sources":["E:/Projects/Online-Store-Server-Client/Frontend/src/pages/loginPage/loginPage.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport {useUserLoginMutation } from '../../components/redux/api/server.api'\r\nimport jwt_decode from 'jwt-decode'\r\nimport './loginPage.scss'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useAppDispatch, useAppSelector } from '../../components/redux/hooks/hooks'\r\nimport { setUser,setToken } from '../../components/redux/slices/userSlice'\r\nimport { setAuth } from '../../components/redux/slices/authSlice'\r\nexport default function RegistrationPage() {\r\n    const [email,setEmail] = React.useState<string>()\r\n    const [password,setPassword] = React.useState<string>()\r\n    const [loginUser,{error:loginError}] = useUserLoginMutation();\r\n    const [error,setError] = React.useState<string>('')\r\n    const dispatch = useAppDispatch()\r\n    const user = useAppSelector(state=>state.user.userToken)\r\n    const navigate = useNavigate()\r\n    const handleLogin = async (e:React.MouseEvent<HTMLInputElement>) =>{\r\n        e.preventDefault()\r\n         await loginUser({email:email,password:password})\r\n        .unwrap()\r\n        .then((data:any)=>data.token)\r\n        .then((token:string)=>{\r\n          localStorage.setItem('token',token)\r\n          dispatch(setUser(jwt_decode(token)))\r\n          dispatch(setAuth(true))\r\n          navigate(-1)\r\n        }).catch((e:any)=>setError(e.data.message))\r\n      \r\n    }\r\n\r\n\r\n\r\n  return (\r\n    <div className='Login_main'>\r\n      <form className='Login_main-form'>\r\n      <h1 className='Login_main_title'>Вход</h1>\r\n        <input value={email} className='Login_form_email' placeholder='Введите email' onChange={(e:any)=>setEmail(e.target.value)}></input>\r\n        <input value={password} className='Login_form_password' type='password' placeholder='Введите пароль' onChange={(e:any)=>setPassword(e.target.value)}></input>\r\n        <input type=\"submit\" className='Login_form_submit' onClick={handleLogin} value=\"Войти\"/>\r\n        <h1 className='Login_form_error'>{error}</h1>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,MAAgC,OAAhC;AACA,SAAQC,oBAAR,QAAoC,uCAApC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,kBAAP;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,oCAA/C;AACA,SAASC,OAAT,QAAiC,yCAAjC;AACA,SAASC,OAAT,QAAwB,yCAAxB;;AACA,eAAe,SAASC,gBAAT,GAA4B;EAAA;;EACvC,MAAM,CAACC,KAAD,EAAOC,QAAP,IAAmBV,KAAK,CAACW,QAAN,EAAzB;EACA,MAAM,CAACC,QAAD,EAAUC,WAAV,IAAyBb,KAAK,CAACW,QAAN,EAA/B;EACA,MAAM,CAACG,SAAD,EAAW;IAACC,KAAK,EAACC;EAAP,CAAX,IAAiCf,oBAAoB,EAA3D;EACA,MAAM,CAACc,KAAD,EAAOE,QAAP,IAAmBjB,KAAK,CAACW,QAAN,CAAuB,EAAvB,CAAzB;EACA,MAAMO,QAAQ,GAAGd,cAAc,EAA/B;EACA,MAAMe,IAAI,GAAGd,cAAc,CAACe,KAAK,IAAEA,KAAK,CAACD,IAAN,CAAWE,SAAnB,CAA3B;EACA,MAAMC,QAAQ,GAAGnB,WAAW,EAA5B;;EACA,MAAMoB,WAAW,GAAG,MAAOC,CAAP,IAA+C;IAC/DA,CAAC,CAACC,cAAF;IACC,MAAMX,SAAS,CAAC;MAACL,KAAK,EAACA,KAAP;MAAaG,QAAQ,EAACA;IAAtB,CAAD,CAAT,CACNc,MADM,GAENC,IAFM,CAEAC,IAAD,IAAYA,IAAI,CAACC,KAFhB,EAGNF,IAHM,CAGAE,KAAD,IAAgB;MACpBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BF,KAA7B;MACAX,QAAQ,CAACZ,OAAO,CAACJ,UAAU,CAAC2B,KAAD,CAAX,CAAR,CAAR;MACAX,QAAQ,CAACX,OAAO,CAAC,IAAD,CAAR,CAAR;MACAe,QAAQ,CAAC,CAAC,CAAF,CAAR;IACD,CARM,EAQJU,KARI,CAQGR,CAAD,IAASP,QAAQ,CAACO,CAAC,CAACI,IAAF,CAAOK,OAAR,CARnB,CAAN;EAUJ,CAZD;;EAgBF,oBACE;IAAK,SAAS,EAAC,YAAf;IAAA,uBACE;MAAM,SAAS,EAAC,iBAAhB;MAAA,wBACA;QAAI,SAAS,EAAC,kBAAd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADA,eAEE;QAAO,KAAK,EAAExB,KAAd;QAAqB,SAAS,EAAC,kBAA/B;QAAkD,WAAW,EAAC,kDAA9D;QAA8E,QAAQ,EAAGe,CAAD,IAASd,QAAQ,CAACc,CAAC,CAACU,MAAF,CAASC,KAAV;MAAzG;QAAA;QAAA;QAAA;MAAA,QAFF,eAGE;QAAO,KAAK,EAAEvB,QAAd;QAAwB,SAAS,EAAC,qBAAlC;QAAwD,IAAI,EAAC,UAA7D;QAAwE,WAAW,EAAC,iFAApF;QAAqG,QAAQ,EAAGY,CAAD,IAASX,WAAW,CAACW,CAAC,CAACU,MAAF,CAASC,KAAV;MAAnI;QAAA;QAAA;QAAA;MAAA,QAHF,eAIE;QAAO,IAAI,EAAC,QAAZ;QAAqB,SAAS,EAAC,mBAA/B;QAAmD,OAAO,EAAEZ,WAA5D;QAAyE,KAAK,EAAC;MAA/E;QAAA;QAAA;QAAA;MAAA,QAJF,eAKE;QAAI,SAAS,EAAC,kBAAd;QAAA,UAAkCR;MAAlC;QAAA;QAAA;QAAA;MAAA,QALF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAWD;;GAnCuBP,gB;UAGmBP,oB,EAEtBG,c,EACJC,c,EACIF,W;;;KAPGK,gB"},"metadata":{},"sourceType":"module"}