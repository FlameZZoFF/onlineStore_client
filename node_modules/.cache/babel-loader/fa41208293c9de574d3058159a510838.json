{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\IntMag\\\\intMAgClient\\\\src\\\\pages\\\\RigistrationPage\\\\RegistrationPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useUserRegisterMutation } from '../../components/redux/api/server.api';\nimport jwt_decode from 'jwt-decode';\nimport './RegistrationPage.scss';\nimport { useAppDispatch, useAppSelector } from '../../components/redux/hooks/hooks';\nimport { setUser } from '../../components/redux/slices/userSlice';\nimport { setAuth } from '../../components/redux/slices/authSlice';\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function RegistrationPage() {\n  _s();\n\n  const navigate = useNavigate();\n  const [email, setEmail] = useState();\n  const [password, setPassword] = useState();\n  const [registerUser] = useUserRegisterMutation();\n  const [error, setError] = useState();\n  const dispatch = useAppDispatch();\n  const user = useAppSelector(state => state.user.User);\n\n  const submitForm = async e => {\n    e.preventDefault();\n    await registerUser({\n      email: email,\n      password: password\n    }).unwrap().then(data => data.token).then(token => {\n      localStorage.setItem('token', token);\n      dispatch(setUser(jwt_decode(token)));\n      dispatch(setAuth(true));\n      navigate('/store');\n    }).catch(e => setError(e.data.message));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Register_main\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"Register_main-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"Register_main_title\",\n        children: \"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        value: email,\n        className: \"Register_form_email\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 email\",\n        onChange: e => setEmail(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        value: password,\n        className: \"Register_form_password\",\n        onChange: e => setPassword(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        className: \"Register_form_submit\",\n        onClick: submitForm\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"Register_form_error\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RegistrationPage, \"FfiGx+owisZO3QtmbUAa0ETMPBA=\", false, function () {\n  return [useNavigate, useUserRegisterMutation, useAppDispatch, useAppSelector];\n});\n\n_c = RegistrationPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"RegistrationPage\");","map":{"version":3,"names":["React","useState","useUserRegisterMutation","jwt_decode","useAppDispatch","useAppSelector","setUser","setAuth","useNavigate","RegistrationPage","navigate","email","setEmail","password","setPassword","registerUser","error","setError","dispatch","user","state","User","submitForm","e","preventDefault","unwrap","then","data","token","localStorage","setItem","catch","message","target","value"],"sources":["E:/Projects/IntMag/intMAgClient/src/pages/RigistrationPage/RegistrationPage.tsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useUserRegisterMutation } from '../../components/redux/api/server.api'\r\nimport jwt_decode from 'jwt-decode'\r\nimport './RegistrationPage.scss'\r\nimport { useAppDispatch, useAppSelector } from '../../components/redux/hooks/hooks'\r\nimport { setToken, setUser } from '../../components/redux/slices/userSlice'\r\nimport { setAuth } from '../../components/redux/slices/authSlice'\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { IToken } from '../../components/interfaces/IResponse'\r\nexport default function RegistrationPage() {\r\n    const navigate = useNavigate()\r\n    const [email,setEmail] = useState()\r\n    const [password,setPassword] = useState()\r\n    const [registerUser] = useUserRegisterMutation();\r\n    const [error,setError] = useState()\r\n    const dispatch = useAppDispatch()\r\n    const user = useAppSelector(state => state.user.User)\r\n    \r\n    const submitForm = async (e:any) =>{\r\n        e.preventDefault()\r\n        await registerUser({email:email,password:password})\r\n        .unwrap()\r\n        .then((data:IToken)=>data.token)\r\n        .then((token:string)=>{\r\n          localStorage.setItem('token',token)\r\n          dispatch(setUser(jwt_decode(token)))\r\n          dispatch(setAuth(true))\r\n          navigate('/store')\r\n        }).catch((e:any)=>setError(e.data.message))\r\n\r\n    }\r\n    \r\n  return (\r\n    <div className='Register_main'>\r\n      <form className='Register_main-form'>\r\n      <h1 className='Register_main_title'>Регистрация</h1>\r\n        <input value={email} className='Register_form_email' placeholder='Введите email' onChange={(e:any)=>setEmail(e.target.value)}></input>\r\n        <input type='password' placeholder='Введите пароль' value={password} className='Register_form_password' onChange={(e:any)=>setPassword(e.target.value)}></input>\r\n        <input type=\"submit\" className='Register_form_submit' onClick={submitForm} />\r\n        <h1 className='Register_form_error'>{error}</h1>\r\n      </form>\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,uBAAT,QAAwC,uCAAxC;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAO,yBAAP;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,oCAA/C;AACA,SAAmBC,OAAnB,QAAkC,yCAAlC;AACA,SAASC,OAAT,QAAwB,yCAAxB;AACA,SAASC,WAAT,QAA4B,kBAA5B;;AAEA,eAAe,SAASC,gBAAT,GAA4B;EAAA;;EACvC,MAAMC,QAAQ,GAAGF,WAAW,EAA5B;EACA,MAAM,CAACG,KAAD,EAAOC,QAAP,IAAmBX,QAAQ,EAAjC;EACA,MAAM,CAACY,QAAD,EAAUC,WAAV,IAAyBb,QAAQ,EAAvC;EACA,MAAM,CAACc,YAAD,IAAiBb,uBAAuB,EAA9C;EACA,MAAM,CAACc,KAAD,EAAOC,QAAP,IAAmBhB,QAAQ,EAAjC;EACA,MAAMiB,QAAQ,GAAGd,cAAc,EAA/B;EACA,MAAMe,IAAI,GAAGd,cAAc,CAACe,KAAK,IAAIA,KAAK,CAACD,IAAN,CAAWE,IAArB,CAA3B;;EAEA,MAAMC,UAAU,GAAG,MAAOC,CAAP,IAAgB;IAC/BA,CAAC,CAACC,cAAF;IACA,MAAMT,YAAY,CAAC;MAACJ,KAAK,EAACA,KAAP;MAAaE,QAAQ,EAACA;IAAtB,CAAD,CAAZ,CACLY,MADK,GAELC,IAFK,CAECC,IAAD,IAAeA,IAAI,CAACC,KAFpB,EAGLF,IAHK,CAGCE,KAAD,IAAgB;MACpBC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BF,KAA7B;MACAV,QAAQ,CAACZ,OAAO,CAACH,UAAU,CAACyB,KAAD,CAAX,CAAR,CAAR;MACAV,QAAQ,CAACX,OAAO,CAAC,IAAD,CAAR,CAAR;MACAG,QAAQ,CAAC,QAAD,CAAR;IACD,CARK,EAQHqB,KARG,CAQIR,CAAD,IAASN,QAAQ,CAACM,CAAC,CAACI,IAAF,CAAOK,OAAR,CARpB,CAAN;EAUH,CAZD;;EAcF,oBACE;IAAK,SAAS,EAAC,eAAf;IAAA,uBACE;MAAM,SAAS,EAAC,oBAAhB;MAAA,wBACA;QAAI,SAAS,EAAC,qBAAd;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADA,eAEE;QAAO,KAAK,EAAErB,KAAd;QAAqB,SAAS,EAAC,qBAA/B;QAAqD,WAAW,EAAC,kDAAjE;QAAiF,QAAQ,EAAGY,CAAD,IAASX,QAAQ,CAACW,CAAC,CAACU,MAAF,CAASC,KAAV;MAA5G;QAAA;QAAA;QAAA;MAAA,QAFF,eAGE;QAAO,IAAI,EAAC,UAAZ;QAAuB,WAAW,EAAC,iFAAnC;QAAoD,KAAK,EAAErB,QAA3D;QAAqE,SAAS,EAAC,wBAA/E;QAAwG,QAAQ,EAAGU,CAAD,IAAST,WAAW,CAACS,CAAC,CAACU,MAAF,CAASC,KAAV;MAAtI;QAAA;QAAA;QAAA;MAAA,QAHF,eAIE;QAAO,IAAI,EAAC,QAAZ;QAAqB,SAAS,EAAC,sBAA/B;QAAsD,OAAO,EAAEZ;MAA/D;QAAA;QAAA;QAAA;MAAA,QAJF,eAKE;QAAI,SAAS,EAAC,qBAAd;QAAA,UAAqCN;MAArC;QAAA;QAAA;QAAA;MAAA,QALF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAWD;;GAlCuBP,gB;UACHD,W,EAGMN,uB,EAENE,c,EACJC,c;;;KAPOI,gB"},"metadata":{},"sourceType":"module"}