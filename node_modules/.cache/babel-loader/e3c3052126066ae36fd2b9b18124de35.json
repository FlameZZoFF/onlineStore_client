{"ast":null,"code":"import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\nexport const serverApi = createApi({\n  reducerPath: 'serverApi',\n  tagTypes: ['Devices'],\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'http://localhost:5000/api/',\n    prepareHeaders: (headers, _ref) => {\n      let {\n        getState\n      } = _ref;\n      const token = localStorage.getItem('token');\n      headers.set('authorization', token ? `Bearer ${token}` : '');\n      return headers;\n    }\n  }),\n  endpoints: build => ({\n    checkAuth: build.query({\n      query: () => ({\n        url: `user/auth`\n      })\n    }),\n    getBrandsByType: build.query({\n      query: id => ({\n        url: `typebrand/${id}`\n      })\n    }),\n    userRegister: build.mutation({\n      query: body => ({\n        url: \"user/registration\",\n        method: 'POST',\n        body\n      })\n    }),\n    userLogin: build.mutation({\n      query: body => ({\n        url: 'user/login',\n        method: 'POST',\n        body\n      })\n    }),\n    getTypes: build.query({\n      query: () => ({\n        url: 'type'\n      })\n    }),\n    getOneDevice: build.query({\n      query: id => ({\n        url: `device/${id}`\n      })\n    }),\n    getBasket: build.query({\n      query: id => ({\n        url: `basket/${id}`\n      }),\n      providesTags: (result, error, arg) => result ? [...result.map(_ref2 => {\n        let {\n          id\n        } = _ref2;\n        return {\n          type: 'Devices',\n          id\n        };\n      }), 'Devices'] : ['Devices']\n    }),\n    getDevices: build.query({\n      query: _ref3 => {\n        let {\n          type,\n          brand\n        } = _ref3;\n        return {\n          url: 'device',\n          params: {\n            typeId: type,\n            brandId: brand\n          }\n        };\n      }\n    }),\n    addDevice: build.mutation({\n      query: body => ({\n        url: \"device\",\n        method: 'POST',\n        body\n      })\n    }),\n    addBucketDevice: build.mutation({\n      query: body => ({\n        url: \"basket\",\n        method: 'POST',\n        body\n      }),\n      invalidatesTags: [{\n        type: 'Devices'\n      }]\n    })\n  })\n});\nexport const {\n  useUserRegisterMutation,\n  useUserLoginMutation,\n  useCheckAuthQuery,\n  useGetTypesQuery,\n  useGetDevicesQuery,\n  useAddBucketDeviceMutation,\n  useGetBasketQuery,\n  useGetOneDeviceQuery,\n  useGetBrandsByTypeQuery,\n  useAddDeviceMutation\n} = serverApi;","map":{"version":3,"names":["createApi","fetchBaseQuery","serverApi","reducerPath","tagTypes","baseQuery","baseUrl","prepareHeaders","headers","getState","token","localStorage","getItem","set","endpoints","build","checkAuth","query","url","getBrandsByType","id","userRegister","mutation","body","method","userLogin","getTypes","getOneDevice","getBasket","providesTags","result","error","arg","map","type","getDevices","brand","params","typeId","brandId","addDevice","addBucketDevice","invalidatesTags","useUserRegisterMutation","useUserLoginMutation","useCheckAuthQuery","useGetTypesQuery","useGetDevicesQuery","useAddBucketDeviceMutation","useGetBasketQuery","useGetOneDeviceQuery","useGetBrandsByTypeQuery","useAddDeviceMutation"],"sources":["E:/Projects/IntMag/intMAgClient/src/components/redux/api/server.api.ts"],"sourcesContent":["import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react'\r\nimport { userRegister } from '../../interfaces/IRequest';\r\n\r\nimport {IBrandsByType, IToken, IType, DeviceResponce} from '../../interfaces/IResponse'\r\n\r\n\r\nexport const serverApi = createApi({\r\n    reducerPath: 'serverApi',\r\n    tagTypes:['Devices'],\r\n    baseQuery: fetchBaseQuery({ \r\n        baseUrl: 'http://localhost:5000/api/',\r\n        prepareHeaders:(headers,{getState}):any=>{\r\n            const token = localStorage.getItem('token'); \r\n            headers.set('authorization',token ? `Bearer ${token}` : '')\r\n            return headers\r\n        } \r\n    }),\r\n\r\n    endpoints: (build) => ({\r\n      checkAuth:build.query<IToken,string>({\r\n        query: () => ({\r\n          url:`user/auth`,\r\n       }),\r\n      }),\r\n\r\n      getBrandsByType:build.query<IBrandsByType[],number>({\r\n        query: (id) => ({\r\n          url:`typebrand/${id}`,\r\n       })\r\n      }),\r\n\r\n      userRegister: build.mutation<userRegister,IToken>({\r\n        query: (body) => ({\r\n            url:\"user/registration\",\r\n            method:'POST',\r\n            body,\r\n        })\r\n      }),\r\n\r\n      userLogin:build.mutation<void,string>({\r\n        query:(body)=>({\r\n            url:'user/login',\r\n            method:'POST',\r\n            body\r\n        })\r\n      }),\r\n\r\n      getTypes:build.query<IType[],string>({\r\n        query:()=>({\r\n            url:'type',\r\n        })\r\n      }),\r\n\r\n      getOneDevice:build.query<void,any>({\r\n        query:(id)=>({\r\n            url:`device/${id}`,\r\n        })\r\n      }),\r\n\r\n      getBasket:build.query<void,string>({\r\n        query:(id)=>({\r\n            url:`basket/${id}`,\r\n        }),\r\n        providesTags: (result:any, error, arg) =>\r\n        result\r\n          ? [...result.map(({ id }:any) => ({ type: 'Devices' as const, id })), 'Devices']\r\n          : ['Devices'],\r\n      }),\r\n\r\n      getDevices:build.query<DeviceResponce,any>({\r\n        query:({type,brand})=>({\r\n            url:'device',\r\n            params:{\r\n              typeId:type,\r\n              brandId:brand\r\n            }\r\n        })\r\n      }),\r\n\r\n      addDevice: build.mutation<void, any>({\r\n        query: (body) => ({\r\n            url:\"device\",\r\n            method:'POST',\r\n            body,\r\n        }),\r\n        }),\r\n\r\n      addBucketDevice: build.mutation<void, any>({\r\n        query: (body) => ({\r\n            url:\"basket\",\r\n            method:'POST',\r\n            body,\r\n        }),\r\n\r\n        invalidatesTags:[{type:'Devices'}]\r\n      }),\r\n      \r\n    })\r\n  })\r\n\r\n  export const {\r\n    useUserRegisterMutation,\r\n    useUserLoginMutation,\r\n    useCheckAuthQuery,\r\n    useGetTypesQuery,\r\n    useGetDevicesQuery,\r\n    useAddBucketDeviceMutation,\r\n    useGetBasketQuery,\r\n    useGetOneDeviceQuery,\r\n    useGetBrandsByTypeQuery,\r\n    useAddDeviceMutation\r\n  } = serverApi\r\n\r\n"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,cAApB,QAA0C,8BAA1C;AAMA,OAAO,MAAMC,SAAS,GAAGF,SAAS,CAAC;EAC/BG,WAAW,EAAE,WADkB;EAE/BC,QAAQ,EAAC,CAAC,SAAD,CAFsB;EAG/BC,SAAS,EAAEJ,cAAc,CAAC;IACtBK,OAAO,EAAE,4BADa;IAEtBC,cAAc,EAAC,CAACC,OAAD,WAA0B;MAAA,IAAjB;QAACC;MAAD,CAAiB;MACrC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd;MACAJ,OAAO,CAACK,GAAR,CAAY,eAAZ,EAA4BH,KAAK,GAAI,UAASA,KAAM,EAAnB,GAAuB,EAAxD;MACA,OAAOF,OAAP;IACH;EANqB,CAAD,CAHM;EAY/BM,SAAS,EAAGC,KAAD,KAAY;IACrBC,SAAS,EAACD,KAAK,CAACE,KAAN,CAA2B;MACnCA,KAAK,EAAE,OAAO;QACZC,GAAG,EAAE;MADO,CAAP;IAD4B,CAA3B,CADW;IAOrBC,eAAe,EAACJ,KAAK,CAACE,KAAN,CAAoC;MAClDA,KAAK,EAAGG,EAAD,KAAS;QACdF,GAAG,EAAE,aAAYE,EAAG;MADN,CAAT;IAD2C,CAApC,CAPK;IAarBC,YAAY,EAAEN,KAAK,CAACO,QAAN,CAAoC;MAChDL,KAAK,EAAGM,IAAD,KAAW;QACdL,GAAG,EAAC,mBADU;QAEdM,MAAM,EAAC,MAFO;QAGdD;MAHc,CAAX;IADyC,CAApC,CAbO;IAqBrBE,SAAS,EAACV,KAAK,CAACO,QAAN,CAA4B;MACpCL,KAAK,EAAEM,IAAD,KAAS;QACXL,GAAG,EAAC,YADO;QAEXM,MAAM,EAAC,MAFI;QAGXD;MAHW,CAAT;IAD8B,CAA5B,CArBW;IA6BrBG,QAAQ,EAACX,KAAK,CAACE,KAAN,CAA4B;MACnCA,KAAK,EAAC,OAAK;QACPC,GAAG,EAAC;MADG,CAAL;IAD6B,CAA5B,CA7BY;IAmCrBS,YAAY,EAACZ,KAAK,CAACE,KAAN,CAAsB;MACjCA,KAAK,EAAEG,EAAD,KAAO;QACTF,GAAG,EAAE,UAASE,EAAG;MADR,CAAP;IAD2B,CAAtB,CAnCQ;IAyCrBQ,SAAS,EAACb,KAAK,CAACE,KAAN,CAAyB;MACjCA,KAAK,EAAEG,EAAD,KAAO;QACTF,GAAG,EAAE,UAASE,EAAG;MADR,CAAP,CAD2B;MAIjCS,YAAY,EAAE,CAACC,MAAD,EAAaC,KAAb,EAAoBC,GAApB,KACdF,MAAM,GACF,CAAC,GAAGA,MAAM,CAACG,GAAP,CAAW;QAAA,IAAC;UAAEb;QAAF,CAAD;QAAA,OAAiB;UAAEc,IAAI,EAAE,SAAR;UAA4Bd;QAA5B,CAAjB;MAAA,CAAX,CAAJ,EAAoE,SAApE,CADE,GAEF,CAAC,SAAD;IAP6B,CAAzB,CAzCW;IAmDrBe,UAAU,EAACpB,KAAK,CAACE,KAAN,CAAgC;MACzCA,KAAK,EAAC;QAAA,IAAC;UAACiB,IAAD;UAAME;QAAN,CAAD;QAAA,OAAiB;UACnBlB,GAAG,EAAC,QADe;UAEnBmB,MAAM,EAAC;YACLC,MAAM,EAACJ,IADF;YAELK,OAAO,EAACH;UAFH;QAFY,CAAjB;MAAA;IADmC,CAAhC,CAnDU;IA6DrBI,SAAS,EAAEzB,KAAK,CAACO,QAAN,CAA0B;MACnCL,KAAK,EAAGM,IAAD,KAAW;QACdL,GAAG,EAAC,QADU;QAEdM,MAAM,EAAC,MAFO;QAGdD;MAHc,CAAX;IAD4B,CAA1B,CA7DU;IAqErBkB,eAAe,EAAE1B,KAAK,CAACO,QAAN,CAA0B;MACzCL,KAAK,EAAGM,IAAD,KAAW;QACdL,GAAG,EAAC,QADU;QAEdM,MAAM,EAAC,MAFO;QAGdD;MAHc,CAAX,CADkC;MAOzCmB,eAAe,EAAC,CAAC;QAACR,IAAI,EAAC;MAAN,CAAD;IAPyB,CAA1B;EArEI,CAAZ;AAZoB,CAAD,CAA3B;AA8FL,OAAO,MAAM;EACXS,uBADW;EAEXC,oBAFW;EAGXC,iBAHW;EAIXC,gBAJW;EAKXC,kBALW;EAMXC,0BANW;EAOXC,iBAPW;EAQXC,oBARW;EASXC,uBATW;EAUXC;AAVW,IAWTlD,SAXG"},"metadata":{},"sourceType":"module"}