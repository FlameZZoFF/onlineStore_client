{"ast":null,"code":"var _jsxFileName = \"E:\\\\Projects\\\\IntMag\\\\intMAgClient\\\\src\\\\App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport StartPage from \"./pages/StartPage/Start-page\";\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport Layout from \"./Routes/Layout\";\nimport ComputerStore from \"./pages/mainPage/storePage\";\nimport BasketPage from \"./pages/basketPage/basketPage\";\nimport ItemPage from \"./pages/itemPage/itemPage\";\nimport RegistrationPage from \"./pages/RigistrationPage/RegistrationPage\";\nimport LoginPage from \"./pages/loginPage/loginPage\";\nimport { useAppDispatch, useAppSelector } from \"./components/redux/hooks/hooks\";\nimport { useCheckAuthQuery } from \"./components/redux/api/server.api\";\nimport { setAuth } from \"./components/redux/slices/authSlice\";\nimport { setUser } from \"./components/redux/slices/userSlice\";\nimport jwtDecode from \"jwt-decode\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const Auth = useAppSelector(state => state.auth.auth);\n  const dispatch = useAppDispatch();\n  const {\n    data,\n    error\n  } = useCheckAuthQuery('');\n  const [Loading, setLoading] = useState(true);\n  useEffect(() => {\n    setLoading(true);\n\n    if (error) {\n      dispatch(setAuth(false));\n      dispatch(setUser([]));\n      setLoading(false);\n    }\n\n    if (data) {\n      localStorage.setItem('token', data.token);\n      dispatch(setAuth(true));\n      dispatch(setUser(jwtDecode(data.token)));\n      setLoading(false);\n    }\n  }, [data, error]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 30\n        }, this),\n        children: [Auth && /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/BucketPage\",\n          element: /*#__PURE__*/_jsxDEV(BasketPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 49\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Login\",\n          element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 35\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Registration\",\n          element: /*#__PURE__*/_jsxDEV(RegistrationPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/*\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Navigate, {\n            to: \"/StartPage\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/Store\",\n          element: /*#__PURE__*/_jsxDEV(ComputerStore, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 36\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/StartPage\",\n          element: /*#__PURE__*/_jsxDEV(StartPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 39\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/ItemPage/:id\",\n          element: /*#__PURE__*/_jsxDEV(ItemPage, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 42\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"cwpaM+Xt1dzBfYIxutW7U9AOiwc=\", false, function () {\n  return [useAppSelector, useAppDispatch, useCheckAuthQuery];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","StartPage","Routes","Route","Navigate","Layout","ComputerStore","BasketPage","ItemPage","RegistrationPage","LoginPage","useAppDispatch","useAppSelector","useCheckAuthQuery","setAuth","setUser","jwtDecode","App","Auth","state","auth","dispatch","data","error","Loading","setLoading","localStorage","setItem","token"],"sources":["E:/Projects/IntMag/intMAgClient/src/App.tsx"],"sourcesContent":["import React,{useEffect,useState} from \"react\";\r\nimport Header from \"./components/header/header\";\r\nimport StartPage from \"./pages/StartPage/Start-page\";\r\nimport {Routes, Route ,Navigate} from 'react-router-dom'\r\nimport Layout from \"./Routes/Layout\";\r\nimport ComputerStore  from \"./pages/mainPage/storePage\";\r\nimport BasketPage from \"./pages/basketPage/basketPage\";\r\nimport ItemPage from \"./pages/itemPage/itemPage\";\r\nimport RegistrationPage from \"./pages/RigistrationPage/RegistrationPage\";\r\nimport LoginPage from \"./pages/loginPage/loginPage\";\r\nimport { useAppDispatch, useAppSelector } from \"./components/redux/hooks/hooks\";\r\nimport { useCheckAuthQuery } from \"./components/redux/api/server.api\";\r\nimport { setAuth } from \"./components/redux/slices/authSlice\";\r\nimport { setUser } from \"./components/redux/slices/userSlice\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport Loader from \"./components/UI/Loader/Loader\";\r\n\r\n\r\nfunction App() {\r\n  const Auth = useAppSelector(state=>state.auth.auth)\r\n  const dispatch = useAppDispatch()\r\n  const {data,error} = useCheckAuthQuery('')\r\n  const [Loading,setLoading] = useState(true)\r\n  useEffect(()=>{\r\n  setLoading(true)\r\n   if(error){\r\n    dispatch(setAuth(false))\r\n    dispatch(setUser([]))\r\n    setLoading(false)\r\n   }\r\n   if(data){\r\n    localStorage.setItem('token',data.token)\r\n    dispatch(setAuth(true))\r\n    dispatch(setUser(jwtDecode(data.token)))\r\n    setLoading(false)\r\n   }\r\n  },[data,error])\r\n  return (\r\n  \r\n    <div className=\"App\">\r\n      \r\n    <Routes>\r\n    <Route path='/' element={<Layout/>}>\r\n    {Auth && <Route path='/BucketPage' element={<BasketPage />}/> } \r\n    <Route path='/Login' element={<LoginPage/>}/>\r\n    <Route path='/Registration' element={<RegistrationPage/>}/>\r\n    <Route path=\"/*\" element={<Navigate to=\"/Login\" />} />\r\n    <Route path=\"/\" element={<Navigate to=\"/StartPage\" />} />\r\n    <Route path ='/Store' element={<ComputerStore/>}/>\r\n    <Route path='/StartPage' element={<StartPage />}/>\r\n    <Route path='/ItemPage/:id' element={<ItemPage />}/>\r\n    \r\n    \r\n    </Route>\r\n    \r\n    \r\n    </Routes>\r\n\r\n    </div>\r\n  \r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAcC,SAAd,EAAwBC,QAAxB,QAAuC,OAAvC;AAEA,OAAOC,SAAP,MAAsB,8BAAtB;AACA,SAAQC,MAAR,EAAgBC,KAAhB,EAAuBC,QAAvB,QAAsC,kBAAtC;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,OAAOC,aAAP,MAA2B,4BAA3B;AACA,OAAOC,UAAP,MAAuB,+BAAvB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,gBAAP,MAA6B,2CAA7B;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,gCAA/C;AACA,SAASC,iBAAT,QAAkC,mCAAlC;AACA,SAASC,OAAT,QAAwB,qCAAxB;AACA,SAASC,OAAT,QAAwB,qCAAxB;AACA,OAAOC,SAAP,MAAsB,YAAtB;;;AAIA,SAASC,GAAT,GAAe;EAAA;;EACb,MAAMC,IAAI,GAAGN,cAAc,CAACO,KAAK,IAAEA,KAAK,CAACC,IAAN,CAAWA,IAAnB,CAA3B;EACA,MAAMC,QAAQ,GAAGV,cAAc,EAA/B;EACA,MAAM;IAACW,IAAD;IAAMC;EAAN,IAAeV,iBAAiB,CAAC,EAAD,CAAtC;EACA,MAAM,CAACW,OAAD,EAASC,UAAT,IAAuBzB,QAAQ,CAAC,IAAD,CAArC;EACAD,SAAS,CAAC,MAAI;IACd0B,UAAU,CAAC,IAAD,CAAV;;IACC,IAAGF,KAAH,EAAS;MACRF,QAAQ,CAACP,OAAO,CAAC,KAAD,CAAR,CAAR;MACAO,QAAQ,CAACN,OAAO,CAAC,EAAD,CAAR,CAAR;MACAU,UAAU,CAAC,KAAD,CAAV;IACA;;IACD,IAAGH,IAAH,EAAQ;MACPI,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BL,IAAI,CAACM,KAAlC;MACAP,QAAQ,CAACP,OAAO,CAAC,IAAD,CAAR,CAAR;MACAO,QAAQ,CAACN,OAAO,CAACC,SAAS,CAACM,IAAI,CAACM,KAAN,CAAV,CAAR,CAAR;MACAH,UAAU,CAAC,KAAD,CAAV;IACA;EACD,CAbQ,EAaP,CAACH,IAAD,EAAMC,KAAN,CAbO,CAAT;EAcA,oBAEE;IAAK,SAAS,EAAC,KAAf;IAAA,uBAEA,QAAC,MAAD;MAAA,uBACA,QAAC,KAAD;QAAO,IAAI,EAAC,GAAZ;QAAgB,OAAO,eAAE,QAAC,MAAD;UAAA;UAAA;UAAA;QAAA,QAAzB;QAAA,WACCL,IAAI,iBAAI,QAAC,KAAD;UAAO,IAAI,EAAC,aAAZ;UAA0B,OAAO,eAAE,QAAC,UAAD;YAAA;YAAA;YAAA;UAAA;QAAnC;UAAA;UAAA;UAAA;QAAA,QADT,eAEA,QAAC,KAAD;UAAO,IAAI,EAAC,QAAZ;UAAqB,OAAO,eAAE,QAAC,SAAD;YAAA;YAAA;YAAA;UAAA;QAA9B;UAAA;UAAA;UAAA;QAAA,QAFA,eAGA,QAAC,KAAD;UAAO,IAAI,EAAC,eAAZ;UAA4B,OAAO,eAAE,QAAC,gBAAD;YAAA;YAAA;YAAA;UAAA;QAArC;UAAA;UAAA;UAAA;QAAA,QAHA,eAIA,QAAC,KAAD;UAAO,IAAI,EAAC,IAAZ;UAAiB,OAAO,eAAE,QAAC,QAAD;YAAU,EAAE,EAAC;UAAb;YAAA;YAAA;YAAA;UAAA;QAA1B;UAAA;UAAA;UAAA;QAAA,QAJA,eAKA,QAAC,KAAD;UAAO,IAAI,EAAC,GAAZ;UAAgB,OAAO,eAAE,QAAC,QAAD;YAAU,EAAE,EAAC;UAAb;YAAA;YAAA;YAAA;UAAA;QAAzB;UAAA;UAAA;UAAA;QAAA,QALA,eAMA,QAAC,KAAD;UAAO,IAAI,EAAE,QAAb;UAAsB,OAAO,eAAE,QAAC,aAAD;YAAA;YAAA;YAAA;UAAA;QAA/B;UAAA;UAAA;UAAA;QAAA,QANA,eAOA,QAAC,KAAD;UAAO,IAAI,EAAC,YAAZ;UAAyB,OAAO,eAAE,QAAC,SAAD;YAAA;YAAA;YAAA;UAAA;QAAlC;UAAA;UAAA;UAAA;QAAA,QAPA,eAQA,QAAC,KAAD;UAAO,IAAI,EAAC,eAAZ;UAA4B,OAAO,eAAE,QAAC,QAAD;YAAA;YAAA;YAAA;UAAA;QAArC;UAAA;UAAA;UAAA;QAAA,QARA;MAAA;QAAA;QAAA;QAAA;MAAA;IADA;MAAA;MAAA;MAAA;IAAA;EAFA;IAAA;IAAA;IAAA;EAAA,QAFF;AAwBD;;GA3CQD,G;UACML,c,EACID,c,EACIE,iB;;;KAHdI,G;AA6CT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}